## Auth service

### Сценарии

Отвечает за аутентификацию и авторизацию пользователей

- Регистрация пользователей
- Вход/авторизация пользователя

### API

- Регистрация
  `POST /signup`

  ```
  {
      nickname: string
      email: string
      auth_type: email | google
      password?: string
  }
  ```

  Ответ сервера:

  ```
  {
    token: string
  }
  ```

  При регистрации с auth*type - google, пароль не обязателен. Для целей MVP предполагаем что для OAUTH мы используем
  только google.
  После успешной регистрации пользователя информация о его создании (uuid, nickname и, возможно, email) отправляется в `user_created` топик
  для того что бы был создан профиль пользователя в `profile service` и пользователь создан в `friend service` (возможно пользователи захотят искать друзей не только по никнейм, но и по email). Если мы не хотим заставлять пользователя сразу вводить
  nickname можно просто генерить для начала какой-то random который пользователь сможет потом поменять, e.g. mighty_beaver*{uuid} или брать часть email.

- Аутентификация
  `POST /signin`

  ```
  {
      email: string
      password?: string
  }
  ```

  Ответ сервера:

  ```
  {
    token: string
  }
  ```

  Логин с использованием email и, опционально, пароля. Если при регистрации был выбран oauth - пользователь будет перенаправлен
  на аутентификацию в сторонний oauth provider

  После успешной регистрации/логина клиент получает jwt токен, который содержит uuid пользователя. Этот uuid должен использоваться остальными сервисами для однозначной идентификации пользователя при сохранении информации о нем.

### Хранение данных

Для хранения данных сервис использует реляционную базу данных (PostgreSQL).
Информация о пользователях хранится в таблице `users`:

```
user_id uuid PK
email varchar not null unique constraint
password_hash varchar not null
auth_type enum not null
```

Auth type enum one of `email` | `google`

### Интеграция с другими сервисами

- После создания пользователя отправлеет сообщение в `user_created` топик
